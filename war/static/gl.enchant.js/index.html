<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/_ah/channel/jsapi"></script>
<script src="../slides.js"></script>
<script src="../index.js"></script>
<script>
if (window['_DCL']) {
  loadMyCss();
} else {
  document.addEventListener('DOMContentLoaded', loadMyCss, false);
}
function loadMyCss() {
  var el = document.createElement('link');
  el.rel = 'stylesheet';
  el.type = 'text/css';
  el.href = 'custom.css';
  document.body.appendChild(el);
}
</script>
</head>
<body style='display: none'>
	<section class='slides layout-widescreen template-default'>
		<article class='biglogo'></article>

		<!-- 表紙 -->
		<article class="fill">
			<h3 class="blue"
				style="margin-top: 500px; font-size: 60px; padding: 30px">gl.enchant.jsで遊ぶ会</h3>
			<img src="precure.png" />
		</article>

		<!-- 自己紹介 -->
		<article>
			<h1 class="blue" style="margin-top: 280px">自己紹介</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px">名前</h1>
			<h1 style="font-size: 130pt">
				楢崎<span class="red">大志</span>
			</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px">Google</h1>
			<h1 style="font-size: 95pt">
				<span class="red">daishi</span>.hmr<span style="font-size: 30pt">@gmail.com</span>
			</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px">Twitter</h1>
			<h1 style="font-size: 110pt">
				<span class="red">daishi</span>_hmr
			</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px">GitHub</h1>
			<h1 style="font-size: 120pt">
				<span class="red">daishi</span>hmr
			</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px">所属</h1>
			<h1 style="margin-top: 100px; font-size: 50pt">（株）エイプルジャパン</h1>
			<h1 style="margin-top: 60px; font-size: 50pt">経営企画室・新規事業開発室</h1>
			<h1 style="margin-top: 60px; font-size: 70pt">
				narazaki.<span class="red">daishi</span><span
					style="font-size: 27pt">@apl.co.jp</span>
			</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 100px; font-size: 80pt">ふだんの仕事</h1>
			<h1 style="margin-top: 80px; font-size: 40pt">いわゆる普通のSIer</h1>
			<h1 style="margin-top: 30px; font-size: 40pt">企業・大学向けシステム開発</h1>
			<h1 style="margin-top: 30px; font-size: 40pt">
				主な使用言語は <img src="Java-200x200.jpg" style="width: 100px" /> <img
					src="android001.png" style="width: 100px" />
			</h1>
		</article>

		<!-- はじめに -->
		<article>
			<h1 class="blue" style="margin-top: 280px">今日のテーマ</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 280px; font-size: 50pt">ブレイブーストの作り方</h1>
		</article>

		<article>
			<h3>なんだそれ？</h3>
			<img src="cover.png" style="float: right" />
			<ul class="build">
				<li>今年8月に9leapに投稿したシューティングゲーム</li>
				<li>YouTube:<br> <a href="http://youtu.be/Mxn-021Kwls">http://youtu.be/Mxn-021Kwls</a></li>
				<li>gl.enchant.jsを本格的に使ってる</li>
				<li>伝統的な横シュー（非弾幕, 振り向き不可）</li>
				<li>開発におよそ3ヶ月かかった</li>
				<li class="red">難易度が理不尽に高い</li>
			</ul>
		</article>
		<article>
			<ul>
				<li class="red" style="font-weight: bold">妙に高い評価を頂いている</li>
			</ul>
			<img src="IMG_0835.PNG" class="centered" style="height: 550px" />
		</article>
		<article>
			<h1 class="blue" style="margin-top: 240px">最高峰！？</h1>
		</article>
		<article>
			<img src="../useful-images/sorehane-yo.jpeg" class="centered"
				style="height: 600px" />
		</article>
		<article>
			<h1 class="blue"
				style="margin-top: 100px; font-size: 50pt; text-align: left">...そんな</h1>
			<h1 class="blue" style="margin-top: 120px; font-size: 50pt">ブレイブーストの作り方</h1>
			<h1 class="blue"
				style="margin-top: 120px; font-size: 50pt; text-align: right">をご紹介</h1>
		</article>

		<!-- 素材の話 -->
		<article>
			<h2>chapter1. 素材の話</h2>
		</article>
		<article>
			<h1 class="blue" style="font-size: 45pt">モデルデータどうするよ？</h1>
		</article>
		<article>
			<h3>モデルデータがない</h3>
			<ul class="build">
				<li>3Dでゲームを作るからにはオリジナルのキャラクターを出したい</li>
				<li>2D素材とちがい、公式パッケージにはドロイドくんしか入ってない</li>
				<li>プリミティブだけで作るのはあまりにも...つらい</li>
				<li>メタセコで作ってMMD? そんな技術ネーヨ</li>
				<li>Blender? Maya?</li>
				<li><img src="../useful-images/wakannai.png" /></li>
			</ul>
		</article>
		<article>
			<h1 class="blue" style="font-size: 40pt">
				簡単に大量のモデルデータを<br>確保したい！
			</h1>
		</article>
		<article>
			<h1 class="blue" style="font-size: 40pt">
				超カンタンな<br>モデリングツールはないのか？
			</h1>
		</article>
		<article>
			<h1 class="blue">あった！</h1>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 10px; font-size: 50pt">DOGA-Lシリーズ</h1>
			<p>
				<img src="l1image.gif" class="centered" style="height: 550px" />
			</p>
		</article>
		<article>
			<h3>なんじゃそれ？</h3>
			<ul class="build">
				<li>20年ぐらい前からある3DCG入門者向けモデリングツール</li>
				<li>学習用途向けだから簡単</li>
				<li>用意されているパーツを組み合わせるだけでモデルが出来ちゃう</li>
				<li>意外とハイレベルなことも...?</li>
			</ul>
		</article>
		<article>
			<h1 class="blue" style="font-size: 100px">これを使おう！</h1>
		</article>
		<article>
			<h1 class="blue" style="font-size: 40px">でも、一般的な形式で出力できないよ...?</h1>
		</article>
		<article>
			<h1 class="blue" style="font-size: 60px">
				だったら変換エンジンを<br>自作しよう！
			</h1>
		</article>
		<article class="fill">
			<h3 class="blue">作りました！</h3>
			<img src="dogencha.png" />
		</article>
		<article>
			<h1 class="blue" style="font-size: 60px">
				DOGA-L3の<br>L3P/L3Cファイルを<br>JSONに変換するサービス
			</h1>
		</article>
		<article>
			<h1 class="blue" style="font-size: 60px">サービス名「DoGencha」</h1>
			<h1 class="blue" style="font-size: 20px; margin-top: 60px">「名前なんてどげんちゃよかたい」の意</h1>
		</article>
		<article>
			<h2 class="green">ちょっとデモ</h2>
		</article>
		<article>
			<h3>DoGencha導入のメリットとデメリット</h3>
			<ul class="build">
				<li class="green">極めて手軽に3Dモデルを作成／入手できる</li>
				<li class="red">データのライセンスが非コピーレフトになってしまう<br>(非商用利用に限定されてしまう)
				</li>
			</ul>
		</article>
		<article>
			<h3>「ブレイブースト」では...</h3>
			<p>ゲーム中に登場する自機・すべての敵キャラ・一部の弾で使用</p>
			<p>モデルデータのみライセンス形態を別に</p>
		</article>

		<!-- 当たり判定の話 -->
		<article>
			<h2>chapter2. 当たり判定の話</h2>
		</article>
		<article>
			<h1 class="blue" style="margin-top: 250px">突然ですが</h1>
		</article>
		<article class="fill">
			<h3 class="green"
				style="font-size: 105px; margin-top: 150px; padding: 50px">「触手」は</h3>
			<h3 class="green"
				style="font-size: 105px; margin-top: 50px; padding: 50px">お好きですか？</h3>
			<img src="syunga.jpeg" />
		</article>
		<article>
			<h3 class="blue">シューティングゲームにおける「触手」</h3>
			<p>古くからシューティングゲームの敵キャラとして登場</p>
		</article>
		<article class="fill">
			<h3>R-TYPE「ドプケラドプス」</h3>
			<img src="r-type.jpeg" />
		</article>
		<article class="fill">
			<h3>ダライアス外伝「ネオンライト・イリュージョン」</h3>
			<img src="draius-gaiden.jpeg" />
		</article>
		<article class="fill">
			<h3>グラディウス「5面 触手ステージ」</h3>
			<img src="gradius-stage5.png" />
		</article>
		<article class="fill">
			<h3>XEXEX「フリント」</h3>
			<img src="xexex.png" />
		</article>
		<article>
			<h3>多関節！</h3>
			<ul>
				<li>単独で存在していたスプライト同士に「親子関係」を持たせて「多関節」を実現することができる</li>
				<li>関節をたくさん使用することで、容易に生物らしい演出が可能</li>
			</ul>
			<div style="text-align: center; font-size: 14pt">
				<div>@usami_yuさんの「すねーくん」</div>
				<img src="usami_yu.gif" style="width: 380px" />
			</div>
		</article>
		<article>
			<h3>gl.enchant.jsで多関節を実現するには</h3>
			<pre>
var body = new Sprite3D();
var arm = new Sprite3D();

body.addChild(arm);
</pre>
			<p>
				glでは2DにおけるGroupにあたるものがない。<br>代わりにSprite3Dに他のSprite3Dを子ノードとして追加できる。
			</p>
			<p>DoGenchaでのDOGA-L3多関節物体(L3C)の実現にはこれをそのまま利用している。</p>
		</article>
		<article class="fill">
			<h1 class="green" style="font-size: 80px; margin-top: 100px">gl.enchant.jsでの</h1>
			<h1 class="green" style="font-size: 80px; margin-top: 100px">多関節物体表現は</h1>
			<h1 class="green" style="font-size: 80px; margin-top: 100px">意外と簡単！</h1>
			<img src="mokujin.png" />
		</article>
		<article>
			<h1 class="blue">しかし！</h1>
		</article>
		<article>
			<h3 class="red">衝突判定に難あり！</h3>
			<p>glにおけるintersectメソッドはthis.x, this.y, this.zしか見ていない</p>
			<p>子ノードのthis.x, this.y, this.zは親ノードからの相対位置</p>
			<p class="red">⇒ 正しく衝突判定ができない！</p>
			<img src="node-collision.png"
				style="width: 900px; margin-left: -100px" />
		</article>
		<article>
			<h3 class="green">正しく衝突判定を行うには</h3>
			<ul>
				<li>親ノードをたどって絶対位置を計算する必要がある</li>
				<li>いっそ腕や脚は無視して、本体だけに当たり判定があるようにするという手もあり...?</li>
			</ul>
			<img src="node-collision2.png"
				style="width: 900px; margin-left: -100px" />
		</article>
		<article>
			<h3>「ブレイブースト」では...</h3>
			<div>１ボスには胸部分にしか当たり判定がない</div>
			<img src="boss1-bounding.png" />
			<div>３ボスはポーズ変更が完了した時点で位置固定の当たり判定を生成している</div>
			<img src="boss3-bounding.png" />
		</article>

		<!-- アルファブレンディングの話 -->
		<article>
			<h2>chapter3. アルファブレンディングの話</h2>
		</article>
		<article>
			<h1 class="blue" style="font-size: 80px">アルファブレンディング！</h1>
		</article>
		<article class="fill">
			<h3 class="blue">アルファブレンディング！</h3>
			<img src="gradius_v.jpg" />
		</article>
		<article class="fill">
			<h3 class="blue">アルファブレンディング！</h3>
			<img src="shiki.JPG" />
		</article>
		<article class="fill">
			<h3 class="blue">アルファブレンディング！</h3>
			<img src="ikaruga.png" />
		</article>
		<article>
			<h1 class="blue" style="font-size: 55px">アルファブレンディングが大好きだ</h1>
		</article>
		<article style="text-align: center">
			<img src="hellsing.png" style="height: 600px" />
		</article>
		<article>
			<h3 class="blue">gl.enchant.jsでビームをカッコ良く表示してみよう！</h3>
			<pre>
// 少しずつずらしながら5枚ほど重ねる
for (var i = 0; i < 5; i++) {
	// 常にカメラの方を向く板ポリゴン
	var beam = new Billboard();
	beam.y = Math.random() * 0.1;
	var beam.mesh.texture.src = game.assets["beam.png"]; // ビーム画像を貼る
	scene.addChild(beam);
}
</pre>
			<p>
				↓こういうテクスチャを貼る<br> <img src="beam.png" border="1"
					style="background: url(../useful-images/bg.png)" />
			</p>
		</article>
		<article style="text-align: center">
			<img src="alpha1.png" style="height: 600px" />
		</article>
		<article>
			<h1 class="red">あれ～？</h1>
		</article>
		<article>
			<h3 class="blue">gl.enchant.jsのデフォルト設定ではアルファブレンディングが有効になっていない</h3>
			<p>_renderメソッドをオーバーライドしてブレンディングに関する設定を行う必要がある</p>
			<pre>
beam._render = function() {
    // ブレンディングするぞ！
    gl.enable(gl.BLEND);
    gl.blendEquation(gl.FUNC_ADD);
    gl.blendFunc(gl.SRC_ALPHA, gl.ONE);

    // 本来の_renderメソッドを呼び出すぞ！
    Sprite3D.prototype._render.apply(this);

    // ブレンディングをやめるぞ！
    gl.disable(gl.BLEND);
};
</pre>
		</article>
		<article style="text-align: center">
			<img src="alpha2.png" style="height: 600px" />
		</article>
		<article>
			<h1 class="green" style="font-size: 70px">うんうん、だいぶよくなった</h1>
		</article>
		<article style="text-align: center">
			<h3 class="red">でもまだすこし変</h3>
			<img src="alpha2_k.png" style="height: 500px" border="1" />
			<h3 class="red">透明度が断続的になってる</h3>
		</article>
		<article>
			<h3 class="blue">デフォルトのFシェーダーはアルファ値0.2未満を無視する</h3>
			<p style="font-size: 20px">gl.enchant.js v0.3.6 3041行目</p>
			<pre style="margin-top: 10px">
vec4 baseColor = vColor;
baseColor *= texColor * uUseTexture + vec4(1.0, 1.0, 1.0, 1.0) * (1.0 - uUseTexture);
float alpha = baseColor.a * uDetectColor.a * uDetectTouch + baseColor.a * (1.0 - uDetectTouch);
if (alpha &lt; 0.2) {
    discard; // ← ここ
}
else {
    vec4 amb = uAmbient * vec4(uAmbientLightColor, 1.0);
</pre>
		</article>
		<article>
			<h3 class="blue">カスタムシェーダーを使おう</h3>
			<p>シェーダーファイルをpreloadで読み込んで...</p>
			<pre style="margin-top: 10px">
game = new Game();
game.preload("standard.vs", "effect.fs");
</pre>
			<p>Shaderを作って...</p>
			<pre style="margin-top: 10px">
var customShader = new Shader(game.assets["standard.vs"], game.assets["effect.fs"]);
</pre>
			<p>Sprite3Dのprogramプロパティにセットする</p>
			<pre style="margin-top: 10px">
beam.program = customShader;
</pre>
			<p style="font-size: 18px">他にもいろいろゴニョゴニョする</p>
			<pre style="margin-top: 10px">
// _render内で足りないUniform変数をセットしてやる
this.program.setUniforms(this.scene.getUniforms());
</pre>
		</article>
		<article class="build" style="text-align: center">
			<img src="alpha3.png" style="height: 600px" /> <img
				src="../useful-images/yokudeki.png"
				style="position: absolute; top: 0px; left: 600px" />
		</article>

		<!--  -->
		<article>
			<h2>chapter 4. その他表現の話</h2>
		</article>

		<!-- お世話になったサイト -->
		<article>
			<h2>appendix. 参考にさせていただいたサイト</h2>
		</article>
		<article>
			<h3>wgld.org - WebGL Developer org</h3>
			<p>
				<a href="http://wgld.org/">http://wgld.org/</a>
			</p>
			<p>
				WebGLが基礎から学べるサイト。<br>解説がむちゃくちゃ丁寧でわかりやすい。<br>シェーダとかクォータニオンはここで勉強した。
			</p>
			<img src="w039_01.jpeg" />
		</article>
		<article>
			<h3>床井研究室</h3>
			<p>
				<a href="http://marina.sys.wakayama-u.ac.jp/~tokoi/">http://marina.sys.wakayama-u.ac.jp/~tokoi/</a>
			</p>
			<p>
				和歌山大学の先生が日々を綴っている。<br>過去ログからOpenGLに関する膨大な知識が得られる。
			</p>
			<img src="sprite19.jpeg" />
		</article>
		<article>
			<h3>IMYGraphics</h3>
			<p>
				<a href="http://andorelseif.com/IMYGraphics/Wiki/doku.php">http://andorelseif.com/IMYGraphics/Wiki/doku.php</a>
			</p>
			<p>フォグのかけ方はここからパクった。</p>
			<img src="fog.png" border="1" />
		</article>
		<article>
			<h3>WebGL Reference Card</h3>
			<p>
				<a
					href="http://www.khronos.org/files/webgl/webgl-reference-card-1_0.pdf">http://www.khronos.org/files/webgl/webgl-reference-card-1_0.pdf</a>
			</p>
			<p>WebGLの規格を管理しているKhronos Groupによる、WebGLのリファレンスカード。</p>
			<p>チートシートとして。</p>
			<img src="referencecard.png" />
		</article>

		<!-- まとめ -->
		<article>
			<h2>まとめ</h2>
		</article>

		<!-- おわり -->
		<article>
			<h2>Thank you!</h2>
		</article>

	</section>

</body>
</html>